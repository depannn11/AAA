<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinzo Apis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'mono': ['JetBrains Mono', 'monospace'],
                        'sans': ['Plus Jakarta Sans', 'sans-serif']
                    },
                    animation: {
                        'shimmer': 'shimmer 2s linear infinite',
                    },
                    keyframes: {
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        
        body { 
            background: #000000;
            background-image: 
                radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.12) 0px, transparent 50%),
                radial-gradient(at 100% 100%, rgba(147, 51, 234, 0.12) 0px, transparent 50%),
                radial-gradient(at 50% 50%, rgba(30, 30, 30, 1) 0px, transparent 80%);
            color: #ffffff; 
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .neo-card {
            background: rgba(255, 255, 255, 0.01);
            backdrop-filter: blur(40px) saturate(200%);
            -webkit-backdrop-filter: blur(40px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.06);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .neo-card:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.5);
        }

        .category-pill {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .category-pill.active {
            background: #ffffff;
            color: #000000;
            transform: scale(1.05);
        }

        .method-badge {
            font-size: 9px;
            font-weight: 800;
            padding: 4px 10px;
            border-radius: 6px;
            letter-spacing: 0.05em;
        }

        .get-badge { background: rgba(59, 130, 246, 0.1); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.2); }
        .post-badge { background: rgba(16, 185, 129, 0.1); color: #34d399; border: 1px solid rgba(16, 185, 129, 0.2); }

        .skeleton {
            background: linear-gradient(90deg, rgba(255,255,255,0.03) 25%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.03) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        input::placeholder { color: rgba(255, 255, 255, 0.2); }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-card { animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="font-sans antialiased">

    <header class="sticky top-0 z-50 glass border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 md:px-12 h-20 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-white rounded-xl flex items-center justify-center">
                    <i class="material-icons text-black text-xl">bolt</i>
                </div>
                <div>
                    <h1 class="text-xl font-black tracking-tighter leading-none">DINZO <span class="text-white/40">APIS</span></h1>
                    <span class="text-[8px] font-bold text-blue-500 uppercase tracking-[0.4em]">v2.0</span>
                </div>
            </div>
            <div class="hidden md:flex items-center gap-6">
                <nav class="flex gap-8 text-[10px] font-bold uppercase tracking-widest text-white/40">
                    <a href="/docs" class="hover:text-white transition-colors">Endpoint List</a>
                    <a href="/ntfound" class="hover:text-white transition-colors">Architecture</a>
                    <a href="/ntfound" class="hover:text-white transition-colors">Pricing</a>
                </nav>
                <div class="h-8 w-[1px] bg-white/10 mx-2"></div>
                <div class="px-4 py-2 glass rounded-lg flex items-center gap-2 border-green-500/20">
                    <div class="w-1.5 h-1.5 bg-green-500 rounded-full shadow-[0_0_10px_rgba(34,197,94,0.8)]"></div>
                    <span class="text-[9px] font-black uppercase tracking-widest text-green-500">Active</span>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 md:px-12 py-16">
        <div class="mb-20">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/5 mb-6">
                <span class="relative flex h-2 w-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
                </span>
                <span class="text-[9px] font-bold uppercase tracking-widest text-blue-400">Production Environment Ready</span>
            </div>
            <h2 class="text-5xl md:text-7xl font-extrabold tracking-tighter mb-6">Explore the <br/><span class="text-white/30">Apis.</span></h2>
            
            <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between mt-12">
                <div class="w-full md:w-96 relative">
                    <i class="material-icons absolute left-5 top-1/2 -translate-y-1/2 text-white/20 text-sm">search</i>
                    <input type="text" id="apiSearch" placeholder="Search by path or description..." class="w-full rounded-2xl pl-12 pr-6 py-4 text-xs glass border-white/10 focus:border-white/30 transition-all outline-none">
                </div>
                
                <div class="flex gap-2 overflow-x-auto no-scrollbar w-full md:w-auto py-2">
                    <button onclick="filterCategory('all', this)" class="category-pill active px-6 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest">All</button>
                    <div id="categoryContainer" class="flex gap-2"></div>
                </div>
            </div>
        </div>

        <div id="apiContent" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="col-span-full grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="h-[400px] neo-card rounded-[2rem] skeleton"></div>
                <div class="h-[400px] neo-card rounded-[2rem] skeleton"></div>
                <div class="h-[400px] neo-card rounded-[2rem] skeleton"></div>
                <div class="h-[400px] neo-card rounded-[2rem] skeleton"></div>
            </div>
        </div>

        <footer class="mt-32 pb-16 border-t border-white/5 pt-16">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center">
                            <i class="material-icons text-white text-sm">code</i>
                        </div>
                        <h4 class="font-black tracking-tighter">DINZO APIS</h4>
                    </div>
                    <p class="text-xs text-white/40 leading-relaxed max-w-sm">
                        High-performance API infrastructure providing reliable data endpoints for developers worldwide. Built for speed, documented for humans.
                    </p>
                </div>
                <div>
                    <h5 class="text-[10px] font-black uppercase tracking-[0.2em] mb-6 text-white/60">Resources</h5>
                    <ul class="space-y-4 text-xs font-bold text-white/30">
                        <li><a href="/docs" class="hover:text-white transition-colors">Documentation</a></li>
                        <li><a href="/ntfound" class="hover:text-white transition-colors">Global Status</a></li>
                        <li><a href="/" class="hover:text-white transition-colors">Home</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="text-[10px] font-black uppercase tracking-[0.2em] mb-6 text-white/60">Community</h5>
                    <ul class="space-y-4 text-xs font-bold text-white/30">
                        <li><a href="t.me/depstore11" class="hover:text-white transition-colors">Telegram</a></li>
                        <li><a href="depstore.my.id" class="hover:text-white transition-colors">Website</a></li>
                        <li><a href="wa.me/628824244996" class="hover:text-white transition-colors">WhatsApp</a></li>
                    </ul>
                </div>
            </div>
            <div class="flex flex-col md:flex-row justify-between items-center gap-6 border-t border-white/5 pt-8">
                <p class="text-[9px] text-white/20 font-bold uppercase tracking-widest">Â© <span id="year"></span> Dinzo Apis Framework. All Rights Reserved.</p>
                <div class="flex gap-6">
                    <div class="w-8 h-8 rounded-full glass flex items-center justify-center hover:bg-white/10 cursor-pointer transition-all">
                        <i class="material-icons text-xs text-white/40">language</i>
                    </div>
                    <div class="w-8 h-8 rounded-full glass flex items-center justify-center hover:bg-white/10 cursor-pointer transition-all">
                        <i class="material-icons text-xs text-white/40">terminal</i>
                    </div>
                </div>
            </div>
        </footer>
    </main>

    <div id="toast" class="fixed bottom-8 right-8 translate-y-20 opacity-0 transition-all duration-500 z-[100]">
        <div class="glass border-white/20 px-6 py-3 rounded-xl flex items-center gap-3 shadow-2xl">
            <i class="material-icons text-green-400 text-sm">check_circle</i>
            <span class="text-[10px] font-black uppercase tracking-widest">Action Successful</span>
        </div>
    </div>

    <script>
        const rawStore = {};
        let activeTag = 'all';

        function showToast(msg = 'Copied to clipboard') {
            const t = document.getElementById('toast');
            t.querySelector('span').textContent = msg;
            t.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => t.classList.add('translate-y-20', 'opacity-0'), 3000);
        }

        function copy(text) { 
            navigator.clipboard.writeText(text);
            showToast();
        }

        async function trigger(cIdx, eIdx, method, path) {
            const key = `${cIdx}-${eIdx}`;
            const form = document.getElementById(`f-${key}`);
            const resultBox = document.getElementById(`r-${key}`);
            const resultContent = document.getElementById(`rc-${key}`);
            const btn = form.querySelector('button');
            const originalBtnText = btn.innerHTML;
            
            resultBox.classList.remove('hidden');
            resultContent.innerHTML = `
                <div class="p-12 flex flex-col items-center">
                    <div class="w-5 h-5 border-2 border-white/10 border-t-blue-500 rounded-full animate-spin mb-4"></div>
                    <span class="text-[8px] font-black uppercase tracking-[0.3em] text-white/20">Processing Request</span>
                </div>
            `;

            btn.disabled = true;
            btn.innerHTML = '<span class="animate-pulse">Executing...</span>';

            const fd = new FormData(form);
            let url = path;
            const cfg = { method: method.toUpperCase() };

            if (cfg.method === 'GET') {
                const p = new URLSearchParams();
                for (const [k, v] of fd.entries()) if(v) p.append(k, v);
                if (p.toString()) url += (url.includes('?') ? '&' : '?') + p.toString();
            } else { 
                cfg.body = fd; 
            }

            try {
                const start = Date.now();
                const res = await fetch(url, cfg);
                const time = Date.now() - start;
                const type = res.headers.get('content-type') || '';
                let out = '';

                if (type.includes('image/')) {
                    const blob = await res.blob();
                    const bUrl = URL.createObjectURL(blob);
                    rawStore[key] = bUrl;
                    out = `<div class="p-8 flex justify-center bg-black/20"><img src="${bUrl}" class="max-h-80 rounded-xl shadow-2xl border border-white/5"></div>`;
                } else {
                    const text = await res.text();
                    try {
                        const json = JSON.parse(text);
                        rawStore[key] = json;
                        out = `<pre class="p-6 text-[11px] font-mono overflow-auto max-h-80 text-blue-300/90 leading-relaxed bg-black/20"><code>${JSON.stringify(json, null, 2)}</code></pre>`;
                    } catch {
                        rawStore[key] = text;
                        out = `<pre class="p-6 text-[11px] font-mono overflow-auto max-h-80 text-gray-400 leading-relaxed bg-black/20">${text}</pre>`;
                    }
                }

                resultContent.innerHTML = `
                    <div class="flex items-center justify-between px-6 py-3 border-b border-white/5 bg-white/[0.02]">
                        <div class="flex gap-8">
                            <div class="flex flex-col">
                                <span class="text-[7px] font-black text-white/20 uppercase tracking-widest mb-1">Status</span>
                                <span class="text-[10px] font-black ${res.ok ? 'text-green-400' : 'text-red-400'}">${res.status} ${res.statusText}</span>
                            </div>
                            <div class="flex flex-col">
                                <span class="text-[7px] font-black text-white/20 uppercase tracking-widest mb-1">Response Time</span>
                                <span class="text-[10px] font-black text-white/70">${time}ms</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="copy(typeof rawStore['${key}'] === 'object' ? JSON.stringify(rawStore['${key}']) : rawStore['${key}'])" class="w-8 h-8 glass rounded-lg flex items-center justify-center hover:bg-white/10 transition-all"><i class="material-icons text-xs">content_copy</i></button>
                            <button onclick="window.open(typeof rawStore['${key}'] === 'string' && rawStore['${key}'].startsWith('blob') ? rawStore['${key}'] : 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(rawStore['${key}'])))" class="w-8 h-8 glass rounded-lg flex items-center justify-center hover:bg-white/10 transition-all"><i class="material-icons text-xs">launch</i></button>
                        </div>
                    </div>
                    ${out}
                `;
            } catch (e) {
                resultContent.innerHTML = `
                    <div class="p-12 text-center">
                        <i class="material-icons text-red-500/50 mb-2">error_outline</i>
                        <div class="text-red-500/80 text-[9px] font-black uppercase tracking-widest">Request Failed</div>
                        <div class="text-white/20 text-[10px] mt-1">${e.message}</div>
                    </div>`;
            } finally {
                btn.disabled = false;
                btn.innerHTML = originalBtnText;
                resultBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        function filterCategory(cat, btn) {
            activeTag = cat;
            document.querySelectorAll('.category-pill').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.api-card-wrapper').forEach(s => {
                s.style.display = (cat === 'all' || s.dataset.tag === cat) ? 'block' : 'none';
            });
        }

        async function init() {
            const container = document.getElementById('apiContent');
            const catContainer = document.getElementById('categoryContainer');
            try {
                const res = await fetch('/src/openapi.json');
                const data = await res.json();
                const grouped = {};

                Object.keys(data.paths).forEach(p => {
                    Object.keys(data.paths[p]).forEach(m => {
                        const info = data.paths[p][m];
                        const tag = info.tags?.[0] || 'Uncategorized';
                        if(!grouped[tag]) grouped[tag] = [];
                        grouped[tag].push({ path: p, method: m, ...info });
                    });
                });

                let h = '';
                let cats = '';
                Object.entries(grouped).forEach(([tag, items], cIdx) => {
                    cats += `<button onclick="filterCategory('${tag}', this)" class="category-pill px-6 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest text-white/40 hover:text-white">${tag}</button>`;
                    items.forEach((it, eIdx) => {
                        const key = `${cIdx}-${eIdx}`;
                        const m = it.method.toUpperCase();
                        const params = it.parameters || [];
                        h += `
                            <div class="api-card-wrapper animate-card" data-tag="${tag}" data-s="${it.path} ${it.summary}">
                                <div class="neo-card rounded-[2rem] overflow-hidden flex flex-col h-full border border-white/5">
                                    <div class="p-8 md:p-10 flex-1">
                                        <div class="flex items-center justify-between mb-8">
                                            <span class="method-badge ${m === 'GET' ? 'get-badge' : 'post-badge'}">${m}</span>
                                            <div class="flex items-center gap-2">
                                                <div class="w-1 h-1 bg-white/20 rounded-full"></div>
                                                <span class="text-[8px] font-black text-white/20 uppercase tracking-[0.2em]">${tag}</span>
                                            </div>
                                        </div>
                                        <h3 class="text-base font-mono font-bold mb-3 text-white/90 truncate" title="${it.path}">${it.path}</h3>
                                        <p class="text-xs text-white/30 mb-8 leading-relaxed line-clamp-2">${it.summary || 'No description provided for this endpoint.'}</p>
                                        
                                        <div class="mb-8">
                                            <div class="flex justify-between items-center mb-3">
                                                <label class="text-[8px] font-black text-white/20 uppercase tracking-widest ml-1">Example Request</label>
                                                <button onclick="copy('curl -X ${m} \\'${window.location.origin}${it.path}\\'')" class="text-white/10 hover:text-white transition-colors"><i class="material-icons text-[14px]">content_copy</i></button>
                                            </div>
                                            <div class="bg-black/40 rounded-xl px-4 py-3 text-[10px] font-mono text-white/40 truncate border border-white/5">
                                                <span class="text-blue-400">curl</span> -X ${m} <span class="text-green-400">"${it.path}"</span>
                                            </div>
                                        </div>

                                        <form id="f-${key}" class="space-y-4">
                                            ${params.length > 0 ? params.map(p => `
                                                <div class="relative">
                                                    <label class="block text-[8px] font-black text-white/20 uppercase tracking-widest mb-2 ml-1">
                                                        ${p.name} ${p.required ? '<span class="text-red-500/40">*</span>' : ''}
                                                    </label>
                                                    <input type="text" name="${p.name}" class="w-full px-5 py-3.5 rounded-xl text-[11px] glass border-white/5 focus:border-blue-500/30 transition-all outline-none" placeholder="value for ${p.name}..." ${p.required ? 'required' : ''}>
                                                </div>
                                            `).join('') : `
                                                <div class="py-4 border border-dashed border-white/5 rounded-xl text-center">
                                                    <span class="text-[9px] font-bold text-white/10 uppercase tracking-widest">No Parameters Required</span>
                                                </div>
                                            `}
                                            <button type="button" onclick="trigger(${cIdx}, ${eIdx}, '${m}', '${it.path}')" class="w-full bg-white text-black py-4 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] hover:bg-blue-50 transition-all active:scale-[0.98] mt-4 shadow-[0_10px_20px_rgba(0,0,0,0.3)]">
                                                Test Request
                                            </button>
                                        </form>
                                    </div>
                                    <div id="r-${key}" class="hidden bg-white/[0.01] border-t border-white/5">
                                        <div id="rc-${key}"></div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                });
                container.innerHTML = h;
                catContainer.innerHTML = cats;
            } catch (e) {
                container.innerHTML = `
                    <div class="col-span-full flex flex-col items-center py-20 opacity-40">
                        <i class="material-icons text-5xl mb-4">cloud_off</i>
                        <p class="font-black uppercase tracking-[0.3em] text-[10px]">Failed to connect to OpenAPI source</p>
                    </div>
                `;
            }
        }

        document.getElementById('apiSearch').oninput = function() {
            const v = this.value.toLowerCase();
            document.querySelectorAll('.api-card-wrapper').forEach(c => {
                const match = c.dataset.s.toLowerCase().includes(v);
                const tagMatch = activeTag === 'all' || c.dataset.tag === activeTag;
                c.style.display = (match && tagMatch) ? 'block' : 'none';
            });
        };

        document.getElementById('year').textContent = new Date().getFullYear();
        window.addEventListener('load', init);
    </script>
</body>
</html>
